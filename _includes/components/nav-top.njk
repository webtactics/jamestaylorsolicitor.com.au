<nav class="childlist">
  {% set navPages = collections.all | eleventyNavigation %}

  {% macro isChildActive(entry) -%}
    {% if entry.url == currentPageUrl %}
      {% return true %}
    {% endif %}
    {% for child in entry.children %}
      {% if isChildActive(child) %}
        {% return true %}
      {% endif %}
    {% endfor %}
    {% return false %}
  {%- endmacro %}

  <ul class="main-menu">
    {%- for entry in navPages %}
      {% include '_includes/components/nav-item.njk' with { entry: entry, currentPageUrl: page.url } %}
    {%- endfor %}
  </ul>
</nav>
